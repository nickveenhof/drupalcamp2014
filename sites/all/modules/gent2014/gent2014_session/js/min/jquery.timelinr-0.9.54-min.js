!function($){function s(){var s=$(settings.datesDiv).find("a."+settings.datesSelectedClass);"forward"==settings.autoPlayDirection?s.parent().is("li:last-child")?$(settings.datesDiv+" li:first-child").find("a").trigger("click"):s.parent().next().find("a").trigger("click"):"backward"==settings.autoPlayDirection&&(s.parent().is("li:first-child")?$(settings.datesDiv+" li:last-child").find("a").trigger("click"):s.parent().prev().find("a").trigger("click"))}jQuery.fn.timelinr=function(s){var e=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:"fast",issuesTransparency:1,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2e3},s);$(function(){var s=$(e.datesDiv+" li").length,i=$(e.issuesDiv+" li").length,t=$(e.datesDiv).find("a."+e.datesSelectedClass),a=$(e.issuesDiv).find("li."+e.issuesSelectedClass),n=$(e.containerDiv).width(),l=$(e.containerDiv).height(),r=$(e.issuesDiv).width(),d=$(e.issuesDiv).height(),u=$(e.issuesDiv+" li").width(),o=$(e.issuesDiv+" li").height(),c=$(e.datesDiv).width(),v=$(e.datesDiv).height(),f=$(e.datesDiv+" li").width(),D=$(e.datesDiv+" li").height();if("horizontal"==e.orientation){$(e.issuesDiv).width(u*i),$(e.datesDiv).width(f*s).css("marginLeft",n/2-f/2);var p=parseInt($(e.datesDiv).css("marginLeft").substring(0,$(e.datesDiv).css("marginLeft").indexOf("px")))}else if("vertical"==e.orientation){$(e.issuesDiv).height(o*i),$(e.datesDiv).height(D*s).css("marginTop",l/2-D/2);var p=parseInt($(e.datesDiv).css("marginTop").substring(0,$(e.datesDiv).css("marginTop").indexOf("px")))}$(e.datesDiv+" a").click(function(i){i.preventDefault();var t=$(this).text(),a=$(this).parent().prevAll().length;"horizontal"==e.orientation?$(e.issuesDiv).animate({marginLeft:-u*a},{queue:!1,duration:e.issuesSpeed}):"vertical"==e.orientation&&$(e.issuesDiv).animate({marginTop:-o*a},{queue:!1,duration:e.issuesSpeed}),$(e.issuesDiv+" li").animate({opacity:e.issuesTransparency},{queue:!1,duration:e.issuesSpeed}).removeClass(e.issuesSelectedClass).eq(a).addClass(e.issuesSelectedClass).fadeTo(e.issuesTransparencySpeed,1),1==s?$(e.prevButton+","+e.nextButton).fadeOut("fast"):2==s?$(e.issuesDiv+" li:first-child").hasClass(e.issuesSelectedClass)?($(e.prevButton).fadeOut("fast"),$(e.nextButton).fadeIn("fast")):$(e.issuesDiv+" li:last-child").hasClass(e.issuesSelectedClass)&&($(e.nextButton).fadeOut("fast"),$(e.prevButton).fadeIn("fast")):$(e.issuesDiv+" li:first-child").hasClass(e.issuesSelectedClass)?($(e.nextButton).fadeIn("fast"),$(e.prevButton).fadeOut("fast")):$(e.issuesDiv+" li:last-child").hasClass(e.issuesSelectedClass)?($(e.prevButton).fadeIn("fast"),$(e.nextButton).fadeOut("fast")):$(e.nextButton+","+e.prevButton).fadeIn("slow"),$(e.datesDiv+" a").removeClass(e.datesSelectedClass),$(this).addClass(e.datesSelectedClass),"horizontal"==e.orientation?$(e.datesDiv).animate({marginLeft:p-f*a},{queue:!1,duration:"settings.datesSpeed"}):"vertical"==e.orientation&&$(e.datesDiv).animate({marginTop:p-D*a},{queue:!1,duration:"settings.datesSpeed"})}),$(e.nextButton).bind("click",function(t){t.preventDefault();var a=$(e.issuesDiv).find("li."+e.issuesSelectedClass).index();if("horizontal"==e.orientation){var n=parseInt($(e.issuesDiv).css("marginLeft").substring(0,$(e.issuesDiv).css("marginLeft").indexOf("px"))),l=n/u,r=parseInt($(e.datesDiv).css("marginLeft").substring(0,$(e.datesDiv).css("marginLeft").indexOf("px"))),d=r-f;-(u*i-u)>=n?($(e.issuesDiv).stop(),$(e.datesDiv+" li:last-child a").click()):$(e.issuesDiv).is(":animated")||$(e.datesDiv+" li").eq(a+1).find("a").trigger("click")}else if("vertical"==e.orientation){var n=parseInt($(e.issuesDiv).css("marginTop").substring(0,$(e.issuesDiv).css("marginTop").indexOf("px"))),l=n/o,r=parseInt($(e.datesDiv).css("marginTop").substring(0,$(e.datesDiv).css("marginTop").indexOf("px"))),d=r-D;-(o*i-o)>=n?($(e.issuesDiv).stop(),$(e.datesDiv+" li:last-child a").click()):$(e.issuesDiv).is(":animated")||$(e.datesDiv+" li").eq(a+1).find("a").trigger("click")}1==s?$(e.prevButton+","+e.nextButton).fadeOut("fast"):2==s?$(e.issuesDiv+" li:first-child").hasClass(e.issuesSelectedClass)?($(e.prevButton).fadeOut("fast"),$(e.nextButton).fadeIn("fast")):$(e.issuesDiv+" li:last-child").hasClass(e.issuesSelectedClass)&&($(e.nextButton).fadeOut("fast"),$(e.prevButton).fadeIn("fast")):$(e.issuesDiv+" li:first-child").hasClass(e.issuesSelectedClass)?$(e.prevButton).fadeOut("fast"):$(e.issuesDiv+" li:last-child").hasClass(e.issuesSelectedClass)?$(e.nextButton).fadeOut("fast"):$(e.nextButton+","+e.prevButton).fadeIn("slow")}),$(e.prevButton).click(function(i){i.preventDefault();var t=$(e.issuesDiv).find("li."+e.issuesSelectedClass).index();if("horizontal"==e.orientation){var a=parseInt($(e.issuesDiv).css("marginLeft").substring(0,$(e.issuesDiv).css("marginLeft").indexOf("px"))),n=a/u,l=parseInt($(e.datesDiv).css("marginLeft").substring(0,$(e.datesDiv).css("marginLeft").indexOf("px"))),r=l+f;a>=0?($(e.issuesDiv).stop(),$(e.datesDiv+" li:first-child a").click()):$(e.issuesDiv).is(":animated")||$(e.datesDiv+" li").eq(t-1).find("a").trigger("click")}else if("vertical"==e.orientation){var a=parseInt($(e.issuesDiv).css("marginTop").substring(0,$(e.issuesDiv).css("marginTop").indexOf("px"))),n=a/o,l=parseInt($(e.datesDiv).css("marginTop").substring(0,$(e.datesDiv).css("marginTop").indexOf("px"))),r=l+D;a>=0?($(e.issuesDiv).stop(),$(e.datesDiv+" li:first-child a").click()):$(e.issuesDiv).is(":animated")||$(e.datesDiv+" li").eq(t-1).find("a").trigger("click")}1==s?$(e.prevButton+","+e.nextButton).fadeOut("fast"):2==s?$(e.issuesDiv+" li:first-child").hasClass(e.issuesSelectedClass)?($(e.prevButton).fadeOut("fast"),$(e.nextButton).fadeIn("fast")):$(e.issuesDiv+" li:last-child").hasClass(e.issuesSelectedClass)&&($(e.nextButton).fadeOut("fast"),$(e.prevButton).fadeIn("fast")):$(e.issuesDiv+" li:first-child").hasClass(e.issuesSelectedClass)?$(e.prevButton).fadeOut("fast"):$(e.issuesDiv+" li:last-child").hasClass(e.issuesSelectedClass)?$(e.nextButton).fadeOut("fast"):$(e.nextButton+","+e.prevButton).fadeIn("slow")}),"true"==e.arrowKeys&&("horizontal"==e.orientation?$(document).keydown(function(s){39==s.keyCode&&$(e.nextButton).click(),37==s.keyCode&&$(e.prevButton).click()}):"vertical"==e.orientation&&$(document).keydown(function(s){40==s.keyCode&&$(e.nextButton).click(),38==s.keyCode&&$(e.prevButton).click()})),$(e.datesDiv+" li").eq(e.startAt-1).find("a").trigger("click"),"true"==e.autoPlay&&setInterval("autoPlay()",e.autoPlayPause)})},$().timelinr({arrowKeys:"true"})}(jQuery);